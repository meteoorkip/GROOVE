\newcommand{\msp}{\;} %math space%
\newcommand{\tick}{\surd}
\providecommand{\ltrace}{\ensuremath{[\![}}
\providecommand{\rtrace}{\ensuremath{]\!]}}
\providecommand{\sem}[1]{\ltrace{#1}\rtrace}
\newcommand{\semio}[1]{\sem{#1}_{\mathsf{io}}}
\newcommand{\semaut}[1]{\sem{#1}_{\mathsf{aut}}}

% Language keywords
\newcommand{\keyword}[1]{%
    \expandafter\newcommand\csname #1K\endcsname
    {{\ensuremath{\textsf{\bfseries#1}}}}%
}
\keyword{alap}
\keyword{try}
\keyword{else}
\keyword{true}
\keyword{if}
\keyword{while}
\keyword{do}
\keyword{until}

% Language statements
\newcommand{\Lor}[2]{\ensuremath{{#1}|{#2}}}
\newcommand{\Lorr}[2]{\ensuremath{{#1}\mid\dotsc\mi{#2}}}
\newcommand{\Lseq}[2]{\ensuremath{{#1};{#2} }}
\newcommand{\Lrule}[1]{\ensuremath{\mathsf{#1}}}
\newcommand{\Ltrue}[0]{\trueK}
\newcommand{\Lstar}[1]{\ensuremath{{#1}*}}
\newcommand{\Lalap}[1]{\ensuremath{\alapK \msp #1}}
\newcommand{\Ldowhile}[2]{\ensuremath{\doK \msp #1 \msp \whileK \msp ( #2 )}}
\newcommand{\Lwhiledo}[2]{\ensuremath{while \msp ( #1 ) \msp do \msp #2 }}
\newcommand{\Lifskip}[2]{\ensuremath{if \msp ( #1 ) \msp #2 }}
\newcommand{\Lifelse}[3]{\ensuremath {if \msp ( #1 ) \msp #2 \msp else \msp #3 }}
\newcommand{\Ltryskip}[1] {\ensuremath{ try \msp #1 }}
\newcommand{\Ltryelse}[2] {\ensuremath{\tryK \msp #1 \msp \elseK \msp #2}}
\newcommand{\Lchoice}[3] {\ensuremath{ choice \msp #1 \msp or \msp #2 \msp ... \msp or \msp #2 }}

% Operators over CAut
\newcommand{\alap}{{\downarrow}}
\newcommand{\tryelse}{\mathbin{?}}
\newcommand{\trace}[1] {\ensuremath{ \ltrace #1 \rtrace }}
\newcommand{\setof}[1] {\ensuremath{{\{ #1 \}}}}
\newcommand{\todo}[1] {({\tt TODO:} {\emph #1})}

%%%% definition of extensible "transition arrows"
%
% auxiliaries
\newcommand{\linefill}{%
    \cleaders
    \hbox{$\smash{\mkern-2mu\mathord-\mkern-2mu}$}%
    \hfill
    \vphantom{\lower1pt\hbox{$\rightarrow$}}%
}
\newcommand{\Linefill}{%
    \cleaders
    \hbox{$\smash{\mkern-2mu\mathord=\mkern-2mu}$}%
    \hfill
    \vphantom{\hbox{$\Rightarrow$}}%
}
\newcommand{\larrow}[0] {\ensuremath{\overset{\varepsilon}{\Rightarrow} }}

% left segment of extensible arrow, no ending
\newcommand{\xleftnoend}[1][]{\mathrel-_{\vphantom{#1}}\mkern-11mu}
\newcommand{\xLeftnoend}[1][]{\mathrel=_{\vphantom{#1}}\mkern-8mu}
% left segment of extensible arrow,arrow head
\newcommand{\xleftArrow}[1][]{\leftarrow_{\vphantom{#1}}\mkern-11mu}
% middle segment of extensible arrow
\newcommand{\xmid}[2][]{\stackrel{#2}{\linefill_{\vphantom{#1}}}}
\newcommand{\xMid}[2][]{\stackrel{#2}{\Linefill_{\vphantom{#1}}}}
% right segment of extensible arrow, no ending
\newcommand{\xrightnoend}[1][]{\mkern-11mu\mathrel-_{#1}}
% right segment of extensible arrow, arrow head
\newcommand{\xrightArrow}[1][]{\mkern-11mu\rightarrow_{#1}}
\newcommand{\xRightArrow}[1][]{\mkern-8mu\Rightarrow_{#1}}
% make arrow symbol
\newcommand{\xmake}[1]{\mathrel{\lower1pt\hbox{$#1$}}}

% single-arrow transition
\newcommand{\trans}[2][]{\xmake{\xleftnoend[#1]\xmid[#1]{#2}\xrightArrow[#1]}}%
% negative single-arrow transition
\newcommand{\ntrans}[2][]{\not\trans[#1]{\enspace#2}}

% single-arrow inverse transition
\newcommand{\snart}[2][]{\xmake{\xleftArrow[#1]\xmid[#1]{#2}\xrightnoend[#1]}}%

% double-arrow transition
\providecommand{\Trans}[2][]{\xmake{\xLeftnoend[#1]\xMid[#1]{#2}\xRightArrow[#1]}}%
% negative double-arrow transition
\newcommand{\nTrans}[2][]{\not\Trans[#1]{\enspace#2}}

\newcommand{\arrow}[1] {\ensuremath{\trans{#1}}}
\newcommand{\arrows}[1] {\arrow{#1^*}}
\newcommand{\narrow}[1] {\ensuremath{\ntrans{#1}}}

\newcommand{\Arrow}[1] {\ensuremath{\Trans{#1}}}
\newcommand{\nArrow}[1] {\ensuremath{\nTrans{#1}}}

\newcommand{\propagate}[0]{\ensuremath{e}}
\newcommand{\dispatch}[0]{\ensuremath{c}}

\newcommand{\Rule}[0]{\ensuremath{\text{\sf Rule}}}
\newcommand{\Data}[0]{\ensuremath{\text{\sf Data}}}
\newcommand{\Id}[0]{\ensuremath{\text{\sf Id}}}
\newcommand{\Name}[0]{\ensuremath{\text{\sf Name}}}
\newcommand{\Lang}[0]{\ensuremath{\text{\sf Lang}}}
\newcommand{\Fail}[0]{\ensuremath{\text{\tt Fail}}}

\newcommand{\Aut}[0]{\ensuremath{\mathsf{Aut}}}
\newcommand{\CAut}[0]{\ensuremath{\mathsf{CAut}}}
\newcommand{\GAut}[0]{\ensuremath{\mathsf{GAut}}}
\newcommand{\SAut}[0]{\ensuremath{\mathsf{SAut}}}
\newcommand{\Init}[0]{\ensuremath{\mathit{Init}}}

\newcommand{\cT}{{\ensuremath{\cal T}}}
\newcommand{\cA}{{\ensuremath{\cal A}}}
\newcommand{\cC}{{\ensuremath{\cal C}}}
\newcommand{\cL}{{\ensuremath{\cal L}}}
\newcommand{\cG}{{\ensuremath{\cal G}}}

\newcommand{\Tr}{\cT}
\newcommand{\STr}{\cT^\tick}

\newcommand{\mmid}{\;\mid\;}
\newcommand{\abs}[1]{|#1|}

